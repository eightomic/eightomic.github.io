<!DOCTYPE html><html lang="en"><head><title>WSP-PRNG-16: A Fast, Tiny 16-Bit PRNG</title><link href="https://williamstaffordparsons.github.io/wsp-prng-16/" rel="canonical"><link href="/favicon.ico?1111111111" rel="icon" type="image/x-icon"><meta content="initial-scale=1,width=device-width" name="viewport"><meta charset="utf-8"><style type="text/css">a{color:#000;font-weight:bold;letter-spacing:-0.1px;text-decoration:none;transition:opacity 0.2s ease;}a:hover{opacity:0.9;}body,html{background:#fafafa;color:#000;font-family:sans-serif;font-size:14px;font-weight:normal;line-height:23px;margin:0;overflow-x:hidden;width:100%;}code{background:#f3f3f3 !important;border:2px solid #bcbcbc !important;border-radius:4px;box-sizing:border-box !important;color:#222;display:inline-block;font-family:monospace !important;font-size:11px;font-weight:normal;height:auto;line-height:18px !important;margin:6px 0 16px;max-height:800px;overflow-x:scroll;padding:30px 31px 25px !important;white-space:pre;width:100% !important;}footer{display:inline-block;margin:100px 0;width:100%;}footer ul{display:inline-block;}footer ul{margin:55px 0 0;padding:0;width:100%;}footer ul li{display:inline-block;float:left;line-height:18px;margin:0 15px 5px 0;}footer ul li a{font-size:12px;float:left;}footer .social-media a{display:block;float:left;}footer .social-media a img{height:16px;}h1,h2,h3{display:inline-block;font-weight:normal;text-transform:uppercase;width:100%;}h1{font-size:23px;letter-spacing:-0.7px;line-height:32px;margin:-6px 0 29px;}h2{font-size:19px;letter-spacing:-0.6px;line-height:42px;margin:0 0 16px;padding-top:18px;}h3{font-size:14px;letter-spacing:-0.2px;margin:13px 0 20px;}p{box-sizing:border-box;color:#555;display:inline-block;margin:0 0 15px;width:100%;}p .code,ul .code{background:#f3f3f3;border:2px solid #bcbcbc;border-radius:4px;color:#222;display:inline-block;font-family:monospace;font-size:11px;font-weight:normal;line-height:16px;margin:2px 1px;padding:4px 5px 0;}ul{list-style:none;margin:0;padding:0;}ul li{color:#555;margin-bottom:15px;}.game{background:#000;border-radius:5px;box-sizing:border-box;margin:0 0 30px;padding:21px 32px;position:relative;transition:opacity 0.2s ease;}.game:hover {opacity:0.9;}.game.no-margin-top{margin-top:5px !important;}.game a{border-radius:5px;height:100%;left:0;position:absolute;text-indent:-9999px;top:0;width:100%;}.game img{display:block;height:32px;margin:12px 0 0;width:32px;}.game h3{color:#fff;font-weight:bold;line-height:30px;margin:17px 0 0;}.game p{color:#999;margin-bottom:5px;}.no-margin-bottom{margin-bottom:0 !important;}.no-margin-left{margin-left:0 !important;}.no-margin-top{margin-top:0 !important;}.section{margin-bottom:40px;position:relative;}.william-stafford-parsons-icon{float:left;margin:0 15px 9px 0;}.william-stafford-parsons-icon img{float:left;height:32px !important;margin:-3px 0 0;}</style></head><body><div style="box-sizing:border-box;margin:0 auto;max-width:720px;padding:0 25px;width:100%;"><header style="display:inline-block;padding:105px 0 70px;width:100%;"><a class="william-stafford-parsons-icon" href="/"><img src="/icon-william-stafford-parsons.jpg"></a></header><main style="min-height:280px;width:100%;"><h1>WSP-PRNG-16: A Fast, Non-Multiplicative, Tiny 16-Bit PRNG With Good Statistical Quality Among Large Quantities of Small Numbers Generated</h1><div class="section"><p class="no-margin-bottom"><a href="/about/">William Stafford Parsons</a> developed a 16-bit pseudorandom number generator algorithm as a substantial improvement to standard library <span class="code">rand()</span> functions, PCG16 and Xorshift16 "798".</p></div><div class="section"><h2>Library</h2><h3 class="no-margin-top">Source</h3><code>#include &lt;stdint.h&gt;

struct wsp_prng_16_s {
  uint32_t increment;
  uint32_t increment_offset;
};

uint16_t wsp_prng_16_randomize(struct wsp_prng_16_s *s) {
  s->increment_offset = ((s->increment_offset << 13)
    | (s->increment_offset >> 19)) ^ s->increment;
  s->increment += 1111111;
  return s->increment_offset;
}</code><h3>Reference</h3><p><span class="code no-margin-left">wsp_prng_16_randomize()</span> is the randomization function that accepts the following argument.</p><p><span class="code no-margin-left">s</span> is a <span class="code">struct wsp_prng_16_s</span> pointer with 2 32-bit unsigned integers <span class="code">s->increment</span> and <span class="code">s->increment_offset</span>, each initialized with any seed values.</p><p>The return value data type is <span class="code">uint16_t</span>.</p><p>It returns the 16-bit unsigned integer pseudorandom number result.</p><h3>Requirements</h3><p class="no-margin-bottom">C compiler with C99 (ISO/IEC 9899:1999) standard compatibility.</p></div><div class="section"><h2>Explanation</h2><p>WSP-PRNG-16 is designed to use as an improvement to PRNGs that generate a large amount of small numbers.</p><p>It's portable for both 32-bit and 64-bit systems.</p><p>It meets strict compliance, portability and code security requirements, although it's a PRNG that isn't suitable for cryptographic purposes.</p><p>It doesn't use modulus, multiplication or division arithmetic operations.</p><p>16-bit deterministic randomness is generated with a 64-bit state.</p><p>By default, the period guarantees a smallest full cycle of 2³² numbers.</p><p>32 bits of state in <span class="code">s->increment</span> are summed with <span class="code">1111111</span> after each random number generation result and mixed in with the bit shuffling sequence.</p><p>This linear increment eliminates the probability of broken infinite cycles when combined with <span class="code">increment_offset</span> and makes it trivial to add an occasional increment externally for estimated, randomized jumps.</p><p>Furthermore, when all state bits are <span class="code">0</span>, the next pseudorandom number escapes zeroland quickly, making it impossible to have a broken state with any combination of numbers.</p><p>It passes <span class="code">stdin16</span> PractRand tests up to 32 MB or 4 million randomized numbers.</p><p>Compared to <span class="code">rand()</span> in a local C99 implementation, it's 1000% faster with better statistical quality. <span class="code">rand()</span> passes PractRand tests up to 512 KB or 256,000 randomized numbers, which is 7% of the quality random numbers WSP-PRNG-16 generates.</p><p>Compared to PCG16, it's at least 150% faster. PCG16 passes PractRand tests up to 250 million randomized 16-bit numbers and may be a reasonable alternative in some applications where statistical randomness evidence is critical.</p><p>Compared to all Xoroshiro and Xorshift algorithms, including Xorshift16 "798", it's 45% to 65% faster. Xorshift16 "798" passes PractRand tests up to 64 KB or 32,000 randomized numbers, which is less than 1% of the quality random numbers WSP-PRNG-16 generates.</p><p>Furthermore, some of these PRNGs are vulnerable to several confirmed broken cycles when seeded with specific values, including <span class="code">0</span>.</p><p>Compared to the lower 16 bits of <a href="/wsp-prng-32/">WSP-PRNG-32</a>, it's 30% faster.</p><p class="no-margin-bottom">All speed tests were performed locally by generating 1 billion numbers on a Pixelbook Go M3 using Debian.</p></div><div class="no-margin-bottom section"><h2>Games</h2><div class="game no-margin-bottom no-margin-top"><a href="/contrivity/">Contrivity</a><img alt="Contrivity Icon" src="/icon-contrivity.jpg"><h3>Contrivity</h3><p>Spawn into the hostile quantum laboratory and destroy wave after wave of oscillations.</p></div></div></main><footer><div class="no-margin-bottom"><p>&copy; 2024 William Stafford Parsons</p><ul><li><a href="/about/">About</a></li><li><a href="/contact/">Contact</a></li><li><a href="/#games">Games</a></li><li><a href="/#research">Research</a></li></ul><ul class="social-media"><li><a href="https://github.com/williamstaffordparsons" target="_blank"><img src="/icon-github.jpg"></a></li></ul><p style="color:#777;font-size:12px;line-height:19px;margin:52px 0 0;">All depictions of peril in games by William Stafford Parsons are for fictional gaming entertainment purposes only. Some of the aforementioned games may have frantic animations which may cause discomfort and seizures for players with epilepsy or other sensitivity disorders. Prolongued periods of looking at a computer screen and typing on a keyboard are discouraged to prevent health issues such as carpal tunnel syndrome.</p></div></footer></div></body></html>
