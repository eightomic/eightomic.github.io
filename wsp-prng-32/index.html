<!DOCTYPE html><html lang="en"><head><title>WSP-PRNG-32: A Fast, Tiny 32-Bit PRNG</title><link href="https://williamstaffordparsons.github.io/wsp-prng-32/" rel="canonical"><link href="/favicon.ico?1111111111" rel="icon" type="image/x-icon"><meta content="initial-scale=1,width=device-width" name="viewport"><meta charset="utf-8"><style type="text/css">a{color:#000;font-weight:bold;letter-spacing:-0.1px;text-decoration:none;transition:opacity 0.2s ease;}a:hover{opacity:0.9;}body,html{background:#fafafa;color:#000;font-family:sans-serif;font-size:14px;font-weight:normal;line-height:23px;margin:0;overflow-x:hidden;width:100%;}code{background:#f3f3f3 !important;border:2px solid #bcbcbc !important;border-radius:4px;box-sizing:border-box !important;color:#222;display:inline-block;font-family:monospace !important;font-size:11px;font-weight:normal;height:auto;line-height:18px !important;margin:6px 0 16px;max-height:800px;overflow-x:scroll;padding:30px 31px 25px !important;white-space:pre;width:100% !important;}footer{display:inline-block;margin:100px 0;width:100%;}footer ul{display:inline-block;}footer ul{margin:55px 0 0;padding:0;width:100%;}footer ul li{display:inline-block;float:left;line-height:18px;margin:0 15px 5px 0;}footer ul li a{font-size:12px;float:left;}footer .social-media a{display:block;float:left;}footer .social-media a img{height:16px;}h1,h2,h3{display:inline-block;font-weight:normal;text-transform:uppercase;width:100%;}h1{font-size:23px;letter-spacing:-0.7px;line-height:32px;margin:-6px 0 29px;}h2{font-size:19px;letter-spacing:-0.6px;line-height:42px;margin:0 0 16px;padding-top:18px;}h3{font-size:14px;letter-spacing:-0.2px;margin:13px 0 20px;}p{box-sizing:border-box;color:#555;display:inline-block;margin:0 0 15px;width:100%;}p .code,ul .code{background:#f3f3f3;border:2px solid #bcbcbc;border-radius:4px;color:#222;display:inline-block;font-family:monospace;font-size:11px;font-weight:normal;line-height:16px;margin:2px 1px;padding:4px 5px 0;}ul{list-style:none;margin:0;padding:0;}ul li{color:#555;margin-bottom:15px;}.game{background:#000;border-radius:5px;box-sizing:border-box;margin:0 0 30px;padding:21px 32px;position:relative;transition:opacity 0.2s ease;}.game:hover {opacity:0.9;}.game.no-margin-top{margin-top:5px !important;}.game a{border-radius:5px;height:100%;left:0;position:absolute;text-indent:-9999px;top:0;width:100%;}.game img{display:block;height:32px;margin:12px 0 0;width:32px;}.game h3{color:#fff;font-weight:bold;line-height:30px;margin:17px 0 0;}.game p{color:#999;margin-bottom:0;}.game .version{color:#555;display:block;font-size:12px;margin:5px 0 3px;}.no-margin-bottom{margin-bottom:0 !important;}.no-margin-left{margin-left:0 !important;}.no-margin-top{margin-top:0 !important;}.section{margin-bottom:40px;position:relative;}.william-stafford-parsons-icon{float:left;margin:0 15px 9px 0;}.william-stafford-parsons-icon img{float:left;height:32px !important;margin:-3px 0 0;}</style></head><body><div style="box-sizing:border-box;margin:0 auto;max-width:720px;padding:0 25px;width:100%;"><header style="display:inline-block;padding:105px 0 70px;width:100%;"><a class="william-stafford-parsons-icon" href="/"><img src="/icon-william-stafford-parsons.jpg"></a></header><main style="min-height:280px;width:100%;"><h1>WSP-PRNG-32: A High-Performance, Low-Resource, Non-Multiplicative 32-Bit PRNG With Good Statistical Quality and a Large Full Cycle</h1><div class="section"><p class="no-margin-bottom"><a href="/about/">William Stafford Parsons</a> developed a 32-bit pseudorandom number generator algorithm with a library in C99 as a substantial improvement to JSF32, Lehmer, PCG32, Xoroshiro and Xorshift32.</p></div><div class="section"><h2>Library</h2><h3 class="no-margin-top">Source</h3><code>#include &lt;stdint.h&gt;

struct wsp_prng_32_s {
  uint32_t a;
  uint32_t b;
  uint32_t c;
};

uint32_t wsp_prng_32_randomize(struct wsp_prng_32_s *s) {
  s->a = ((s->a << 14) | (s->a >> 18)) ^ s->b;
  s->c += 1111111111;
  s->b = ((s->b << 21) | (s->b >> 11)) + s->c;
  return s->a + 1111111111;
}</code><h3>Reference</h3><p><span class="code no-margin-left">wsp_prng_32_randomize()</span> is the randomization function that accepts the following argument.</p><p><span class="code no-margin-left">s</span> is a <span class="code">struct wsp_prng_32_s</span> pointer with 3 32-bit unsigned integers <span class="code">s->a</span>, <span class="code">s->b</span> and <span class="code">s->c</span> initialized with any seed values.</p><p>The return value data type is <span class="code">uint32_t</span>.</p><p>It returns the 32-bit unsigned integer pseudorandom number result.</p><h3>Requirements</h3><p>C compiler with C99 (ISO/IEC 9899:1999) standard compatibility.</p><p class="no-margin-bottom">CPU with single-threaded, instruction-level parallelism support.</p></div><div class="section"><h2>Explanation</h2><p>WSP-PRNG-32 is designed to pass statistical tests with efficient resource usage, fast speed and a decent period.</p><p>It's portable for both 32-bit and 64-bit systems.</p><p>It meets strict compliance, portability and security requirements, although it's a trivially-reversible PRNG that isn't suitable for cryptographic purposes.</p><p>It doesn't use modulus, multiplication or division arithmetic operations.</p><p>32-bit entropy is generated with a 96-bit auxiliary state.</p><p>By default, the period guarantees a smallest full cycle of 2³² numbers, an estimated average full cycle between 2⁶⁴ and 2⁹⁶ numbers.</p><p>32 bits of state are summed with <span class="code">1111111111</span> after each random number generation result and mixed in with the bit shuffling sequence.</p><p>This eliminates the probability of broken infinite cycles and makes it trivial to add an occasional increment for estimated, randomized jumps.</p><p>Furthermore, when all state bits are <span class="code">0</span>, the next pseudorandom number escapes zeroland quickly, making it impossible to have a broken state with any combination of numbers.</p><p>The following test results were performed with all state bits initialized to <span class="code">0</span>.</p><p>WSP-PRNG-32 passes all TestU01 BigCrush battery tests as the fastest one-at-a-time PRNG that passes BigCrush.</p><p>Compared to PCG32, the average speed is 8% to 10% faster when generating 1 billion random numbers repeatedly.</p><p>Compared to <span class="code">pcg32_fast</span>, the average speed is similar, but when compiler optimization is enabled with <span class="code">-O3</span>, the average speed is at least 18% faster.</p><p>Furthermore, PCG32 has a smaller full cycle with a stricter 64-bit system requirement and multiplication operations. Nevertheless, PCG32 is a reasonable alternative in some applications where statistical randomness evidence is critical.</p><p>Compared to JSF32 and Lehmer, the average speed is 20% faster when generating 1 billion random numbers repeatedly.</p><p>Compared to all Xoroshiro and Xorshift algorithms, it's 20% to 40% faster.</p><p>Furthermore, most of these PRNGs are vulnerable to several confirmed broken cycles when seeded with specific values, including <span class="code">0</span>.</p><p>If only 16-bit numbers are required, <a href="/wsp-prng-16/">WSP-PRNG-16</a> is the fastest 16-bit one-at-a-time PRNG with good quality for up to 4 million numbers without re-seeding.</p><p class="no-margin-bottom">All speed tests were performed locally on a Pixelbook Go M3 using Debian.</p></div><div class="no-margin-bottom section"><h2>Games</h2><div class="game no-margin-bottom no-margin-top"><a href="/contrivity/">Contrivity</a><img alt="Contrivity Icon" src="/icon-contrivity.jpg"><h3>Contrivity</h3><p>Spawn into the hostile quantum laboratory and destroy wave after wave of oscillations.</p><span class="version">v1.0.21</span></div></div></main><footer><div class="no-margin-bottom"><p>&copy; 2024 William Stafford Parsons</p><ul><li><a href="/about/">About</a></li><li><a href="/contact/">Contact</a></li><li><a href="/#games">Games</a></li><li><a href="/#research">Research</a></li></ul><ul class="social-media"><li><a href="https://github.com/williamstaffordparsons" target="_blank"><img src="/icon-github.jpg"></a></li><li><a href="https://www.instagram.com/williamstaffordparsons" target="_blank"><img src="/icon-instagram.jpg"></a></li></ul><p style="color:#777;font-size:12px;line-height:19px;margin:52px 0 0;">All depictions of peril in games by William Stafford Parsons are for fictional gaming entertainment purposes only. Some of the aforementioned games may have frantic animations which may cause discomfort and seizures for players with epilepsy or other sensitivity disorders. Prolongued periods of looking at a computer screen and typing on a keyboard are discouraged to prevent health issues such as carpal tunnel syndrome.</p></div></footer></div></body></html>
